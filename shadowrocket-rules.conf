[General]
include = shadowrocket_basic.conf
update-url = https://raw.githubusercontent.com/memory2005/shadowrocket-rules/main/shadowrocket-rules.conf

# === 关键新增：系统级内网绕过 ===
bypass-system = true
skip-proxy = 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12, localhost, *.local, e926.org
tun-excluded-routes = 10.0.0.0/8, 100.64.0.0/10, 127.0.0.0/8, 169.254.0.0/16, 172.16.0.0/12, 192.0.0.0/24, 192.0.2.0/24, 192.88.99.0/24, 192.168.0.0/16, 198.51.100.0/24, 203.0.113.0/24, 224.0.0.0/4, 255.255.255.255/32

[Rule]
# === 抖音/字节跳动 屏蔽追踪与广告 (防大数据杀熟) ===

# 1. 核心日志与行为上报 (阻断后平台难以精准画像)
DOMAIN-SUFFIX,log.snssdk.com,REJECT
DOMAIN-SUFFIX,rtlog.snssdk.com,REJECT
DOMAIN-SUFFIX,toblog.snssdk.com,REJECT
DOMAIN-SUFFIX,log.amemv.com,REJECT

# 2. 设备指纹与环境监控 (减少设备级追踪)
DOMAIN-SUFFIX,dm.toutiao.com,REJECT
DOMAIN-SUFFIX,mon.snssdk.com,REJECT

# 3. 广告投放系统 (穿山甲联盟与字节广告)
DOMAIN-SUFFIX,ad.toutiao.com,REJECT
DOMAIN-SUFFIX,dsp.toutiao.com,REJECT
DOMAIN-SUFFIX,pangolin-sdk-toutiao.com,REJECT
DOMAIN-SUFFIX,pangolin-sdk-toutiao1.com,REJECT
DOMAIN-SUFFIX,pglstatp-toutiao.com,REJECT
DOMAIN-SUFFIX,video-cn.snssdk.com,REJECT
DOMAIN-SUFFIX,is.snssdk.com,REJECT

# === 抖音/TikTok 运营专用：全量伪装 ===
# 策略说明：全部走 PROXY，确保 IP 地址和行为轨迹一致

# 1. 核心业务域名 (涵盖抖音和海外TikTok)
DOMAIN-KEYWORD,douyin,PROXY
DOMAIN-KEYWORD,tiktok,PROXY
DOMAIN-SUFFIX,amemv.com,PROXY
DOMAIN-SUFFIX,aweme.snssdk.com,PROXY
DOMAIN-SUFFIX,pstatp.com,PROXY
DOMAIN-SUFFIX,muscdn.com,PROXY
DOMAIN-SUFFIX,musical.ly,PROXY
DOMAIN-SUFFIX,tiktokv.com,PROXY
DOMAIN-SUFFIX,tiktokcdn.com,PROXY
DOMAIN-SUFFIX,byteoversea.com,PROXY
DOMAIN-SUFFIX,ibytedtos.com,PROXY
DOMAIN-SUFFIX,ibyteimg.com,PROXY

# 2. 关键：日志与风控 (必须走代理，不能 REJECT)
# 只有走代理，平台才会认为这些数据产生于海外
DOMAIN-SUFFIX,snssdk.com,PROXY
DOMAIN-SUFFIX,toutiao.com,PROXY
DOMAIN-SUFFIX,bytedance.com,PROXY
DOMAIN-SUFFIX,bytedance.net,PROXY

# 3. 之前的风控云 (运营环境必须伪装 IP)
DOMAIN-SUFFIX,fengkongcloud.com,PROXY
DOMAIN-SUFFIX,shumei.com,PROXY


# === 涨乐全球通（华泰证券）===
DOMAIN-SUFFIX,htsc.com,DIRECT
DOMAIN-SUFFIX,htscimg.cn,DIRECT
DOMAIN-SUFFIX,htscsec.com,DIRECT
DOMAIN-SUFFIX,hstong.com,DIRECT
DOMAIN-SUFFIX,hstongapp.com,DIRECT
DOMAIN-SUFFIX,hsmartsight.com,DIRECT

# === Futu & Moomoo ===
DOMAIN-SUFFIX,futuhk.com,DIRECT
DOMAIN-SUFFIX,futu5.com,DIRECT
DOMAIN-SUFFIX,futu.com,DIRECT
DOMAIN-SUFFIX,futunnquote.com,DIRECT
DOMAIN-SUFFIX,futupay.com,DIRECT
DOMAIN-SUFFIX,collect.futuhn.com,DIRECT
DOMAIN-SUFFIX,moomoo.com,DIRECT

# === Binance & OKX ===
# 注意：如果您在中国大陆，binance.com 直连通常不可用，请确认此规则符合您的网络环境
DOMAIN-SUFFIX,binance.com,DIRECT
DOMAIN-SUFFIX,binancecnt.com,DIRECT
DOMAIN-SUFFIX,binance.info,DIRECT
DOMAIN-SUFFIX,forter.com,DIRECT
DOMAIN-SUFFIX,bin.bnbstatic.com,DIRECT
DOMAIN-SUFFIX,www.okx.com,DIRECT
DOMAIN-SUFFIX,okx.com.cdn.cloudflare.net,DIRECT
IP-CIDR,13.248.135.87/32,DIRECT,no-resolve

# === 小红书全域代理 ===
DOMAIN-SUFFIX,xiaohongshu.com,PROXY
DOMAIN-SUFFIX,xhscdn.com,PROXY
DOMAIN-SUFFIX,xhscdn.net,PROXY
DOMAIN-KEYWORD,xiaohongshu,PROXY

# === Apple / iCloud ===
DOMAIN-SUFFIX,p50-fmf.icloud.com,DIRECT
DOMAIN-SUFFIX,gateway.icloud.com,DIRECT
DOMAIN-SUFFIX,p49-buy.itunes.apple.com,DIRECT

# === Microsoft ===
DOMAIN-SUFFIX,api.onedrive.com,PROXY
DOMAIN-SUFFIX,in.appcenter.ms,PROXY
DOMAIN-SUFFIX,copilot.microsoft.com,PROXY
DOMAIN-SUFFIX,mobile.events.data.microsoft.com,PROXY

# === 微信文档、办公类服务直连 ===
DOMAIN-SUFFIX,doc.weixin.qq.com,DIRECT
DOMAIN-SUFFIX,work.weixin.qq.com,DIRECT

# === 微信公众号、视频号类 走代理 ===
DOMAIN-SUFFIX,mp.weixin.qq.com,PROXY
DOMAIN-SUFFIX,weixin.qq.com,PROXY
DOMAIN-KEYWORD,mp.weixin,PROXY
DOMAIN-SUFFIX,wxapp.tc.qq.com,PROXY
DOMAIN-SUFFIX,vweixinc.tc.qq.com,PROXY
DOMAIN-SUFFIX,vweixinthumb.tc.qq.com,PROXY

# === 以下域名直连，保护微信通话稳定性 ===
DOMAIN-SUFFIX,qq.com,DIRECT
DOMAIN-SUFFIX,wechat.com,DIRECT
DOMAIN-SUFFIX,qpic.cn,DIRECT
DOMAIN-SUFFIX,wx.qlogo.cn,DIRECT
DOMAIN-SUFFIX,voice.wechat.com,DIRECT
DOMAIN-KEYWORD,voip,DIRECT
DOMAIN-KEYWORD,wechat,DIRECT

# === 淘宝埋点 ===
DOMAIN-SUFFIX,h-adashx.ut.taobao.com,DIRECT

# === SaaS exch 接口 ===
DOMAIN-SUFFIX,api.saasexch.info,DIRECT
DOMAIN-SUFFIX,api.saasexch.io,DIRECT

# === Amazon AWS ===
DOMAIN-SUFFIX,amazonaws.com,DIRECT

# === 汇丰银行 HSBC Hong Kong ===
DOMAIN-SUFFIX,hsbc.com.hk,DIRECT
DOMAIN-SUFFIX,www.hsbc.com.hk,DIRECT
DOMAIN-SUFFIX,insurance.hsbc.com.hk,DIRECT
DOMAIN-SUFFIX,cdntm.hsbc.com.hk,DIRECT
DOMAIN-SUFFIX,m.mobilex-static.hsbc.com.hk,DIRECT
DOMAIN-SUFFIX,rbwm-api.hsbc.com.hk,DIRECT
DOMAIN-SUFFIX,mobile.hsbc.com.hk,DIRECT
DOMAIN-SUFFIX,logon.hsbc.com.hk,DIRECT
DOMAIN-SUFFIX,online-banking.hsbc.com.hk,DIRECT
DOMAIN-SUFFIX,personal.hsbc.com.hk,DIRECT

# === 中银香港 BOCHK ===
DOMAIN-SUFFIX,bochk.com,DIRECT
DOMAIN-SUFFIX,www.bochk.com,DIRECT
DOMAIN-SUFFIX,mb.bochk.com,DIRECT
DOMAIN-SUFFIX,mba.bochk.com,DIRECT
DOMAIN-SUFFIX,fio.bochk.com,DIRECT
DOMAIN-SUFFIX,ocs.bochk.com,DIRECT
DOMAIN-SUFFIX,ebanking.bochk.com,DIRECT
DOMAIN-SUFFIX,ibanking.bochk.com,DIRECT
DOMAIN-SUFFIX,pib.bochk.com,DIRECT
DOMAIN-SUFFIX,rtj.bochk.com,DIRECT

# === 邮件服务 ===
DOMAIN-SUFFIX,m.hotmail.com,DIRECT

# === Chat服务 ===
DOMAIN-SUFFIX,chat.deepseek.com,DIRECT

# === 全栈式风控服务提供商 PROXY 的域名 ===
DOMAIN-SUFFIX,fengkongcloud.com,PROXY

# === (建议) 兜底规则 ===
# 如果 basic.conf 里没有 FINAL 规则，建议在这里加一条
# GEOIP,CN,DIRECT
# FINAL,PROXY
